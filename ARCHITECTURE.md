# ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ GreMuiv

## ğŸ“‹ Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ¸Ğµ

1. [ĞĞ±Ñ‰Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°](#Ğ¾Ğ±Ñ‰Ğ°Ñ-Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°)
2. [Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚ĞµĞº](#Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹-ÑÑ‚ĞµĞº)
3. [Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°](#ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°-Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°)
4. [Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…](#Ğ±Ğ°Ğ·Ğ°-Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…)
5. [API Endpoints](#api-endpoints)
6. [ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹](#ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹-ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹)
7. [ĞŸĞ¾Ñ‚Ğ¾ĞºĞ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…](#Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ¸-Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…)

---

## ğŸ¯ ĞĞ±Ñ‰Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

GreMuiv â€” ÑÑ‚Ğ¾ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¶ÑƒÑ€Ğ½Ğ°Ğ»Ğ¾Ğ¼ Ğ¾Ñ†ĞµĞ½Ğ¾Ğº ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚Ğ¾Ğ², ÑĞ¾ÑÑ‚Ğ¾ÑÑ‰Ğ°Ñ Ğ¸Ğ· ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ñ… ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ²:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Docker Container                          â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   Caddy      â”‚  â”‚  FastAPI     â”‚  â”‚  Telegram   â”‚       â”‚
â”‚  â”‚ (Web Server) â”‚  â”‚  (Backend)   â”‚  â”‚    Bot      â”‚       â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚             â”‚       â”‚
â”‚  â”‚  Port 80/443 â”‚  â”‚  Port 5000   â”‚  â”‚  (Thread)   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚         â”‚                  â”‚                 â”‚               â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                            â”‚                                 â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                    â”‚   SQLite DB    â”‚                        â”‚
â”‚                    â”‚  (students.db) â”‚                        â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         Parser (Thread) - Ñ€Ğ°Ğ· Ğ² Ñ‡Ğ°Ñ                  â”‚   â”‚
â”‚  â”‚  â€¢ Ğ¡ĞºĞ°Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚ Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ñ Google Drive                    â”‚   â”‚
â”‚  â”‚  â€¢ ĞŸĞ°Ñ€ÑĞ¸Ñ‚ Excel Ñ„Ğ°Ğ¹Ğ»Ñ‹                                â”‚   â”‚
â”‚  â”‚  â€¢ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ² Ğ‘Ğ”                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         React Frontend (Static)                      â”‚   â”‚
â”‚  â”‚  â€¢ ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ĞµÑ‚ Ğ¶ÑƒÑ€Ğ½Ğ°Ğ» Ğ¾Ñ†ĞµĞ½Ğ¾Ğº                         â”‚   â”‚
â”‚  â”‚  â€¢ Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¸ Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³Ğ¸                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ñ‹ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹:

- **ĞœĞ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€**: Ğ’ÑĞµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‚ Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¼ Docker ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğµ
- **ĞœĞ½Ğ¾Ğ³Ğ¾Ğ¿Ğ¾Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ**: ĞŸĞ°Ñ€ÑĞµÑ€ Ğ¸ Telegram Ğ±Ğ¾Ñ‚ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‚ Ğ² Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ°Ñ…
- **Reverse Proxy**: Caddy Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ HTTPS Ğ¸ Ğ¿Ñ€Ğ¾ĞºÑĞ¸Ñ€ÑƒĞµÑ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ğº API
- **RESTful API**: FastAPI Ğ¿Ñ€ĞµĞ´Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ÑĞµÑ‚ REST API Ğ´Ğ»Ñ Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´Ğ°
- **SQLite**: Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ°Ñ Ğ±Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ´Ğ»Ñ Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

---

## ğŸ› ï¸ Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚ĞµĞº

### Backend

| Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ | Ğ’ĞµÑ€ÑĞ¸Ñ | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|------------|--------|------------|
| **Python** | 3.11 | ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ÑĞ·Ñ‹Ğº Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ |
| **FastAPI** | â‰¥0.104.0 | REST API Ñ„Ñ€ĞµĞ¹Ğ¼Ğ²Ğ¾Ñ€Ğº |
| **Uvicorn** | â‰¥0.24.0 | ASGI ÑĞµÑ€Ğ²ĞµÑ€ |
| **SQLAlchemy** | â‰¥2.0.35 | ORM Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ğ‘Ğ” |
| **aiogram** | â‰¥3.0.0 | Telegram Bot API Ñ„Ñ€ĞµĞ¹Ğ¼Ğ²Ğ¾Ñ€Ğº |
| **openpyxl** | 3.1.2 | ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ Excel Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² |
| **gdown** | â‰¥4.7.1 | Ğ¡ĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² Ñ Google Drive |
| **schedule** | 1.2.0 | ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ñ‰Ğ¸Ğº Ğ·Ğ°Ğ´Ğ°Ñ‡ |
| **requests** | 2.32.5 | HTTP ĞºĞ»Ğ¸ĞµĞ½Ñ‚ |

### Frontend

| Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ | Ğ’ĞµÑ€ÑĞ¸Ñ | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|------------|--------|------------|
| **React** | 18.2.0 | UI Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ° |
| **Vite** | 5.0.0 | Ğ¡Ğ±Ğ¾Ñ€Ñ‰Ğ¸Ğº Ğ¸ dev-ÑĞµÑ€Ğ²ĞµÑ€ |
| **Axios** | 1.6.0 | HTTP ĞºĞ»Ğ¸ĞµĞ½Ñ‚ Ğ´Ğ»Ñ API |
| **React Router** | - | ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (SPA) |

### Infrastructure

| Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|------------|------------|
| **Docker** | ĞšĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ |
| **Caddy** | Reverse proxy, HTTPS (Let's Encrypt) |
| **Supervisor** | Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ°Ğ¼Ğ¸ Ğ² ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğµ |
| **SQLite** | Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… |

---

## ğŸ“ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
GreMuiv/
â”œâ”€â”€ backend/              # FastAPI Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ
â”‚   â”œâ”€â”€ app.py          # Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ° FastAPI
â”‚   â”œâ”€â”€ config.py       # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ (CORS, Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸)
â”‚   â”œâ”€â”€ routes/         # API Ñ€Ğ¾ÑƒÑ‚Ñ‹
â”‚   â”‚   â”œâ”€â”€ groups.py   # Ğ Ğ¾ÑƒÑ‚Ñ‹ Ğ´Ğ»Ñ Ğ³Ñ€ÑƒĞ¿Ğ¿
â”‚   â”‚   â”œâ”€â”€ subjects.py # Ğ Ğ¾ÑƒÑ‚Ñ‹ Ğ´Ğ»Ñ Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ğ¾Ğ²
â”‚   â”‚   â”œâ”€â”€ students.py # Ğ Ğ¾ÑƒÑ‚Ñ‹ Ğ´Ğ»Ñ ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚Ğ¾Ğ²
â”‚   â”‚   â”œâ”€â”€ grades.py   # Ğ Ğ¾ÑƒÑ‚Ñ‹ Ğ´Ğ»Ñ Ğ¾Ñ†ĞµĞ½Ğ¾Ğº
â”‚   â”‚   â”œâ”€â”€ stats.py    # Ğ Ğ¾ÑƒÑ‚Ñ‹ Ğ´Ğ»Ñ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ¸
â”‚   â”‚   â””â”€â”€ student.py  # Ğ Ğ¾ÑƒÑ‚Ñ‹ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ° ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚Ğ°
â”‚   â””â”€â”€ utils/          # Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹
â”‚       â”œâ”€â”€ auth.py     # ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ (Ñ‚Ğ¾ĞºĞµĞ½Ñ‹)
â”‚       â””â”€â”€ helpers.py  # Ğ’ÑĞ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸
â”‚
â”œâ”€â”€ frontend/            # React Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/ # React ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹
â”‚   â”‚   â”œâ”€â”€ hooks/      # Custom hooks
â”‚   â”‚   â”œâ”€â”€ services/   # API ĞºĞ»Ğ¸ĞµĞ½Ñ‚
â”‚   â”‚   â””â”€â”€ utils/      # Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹
â”‚   â””â”€â”€ dist/           # Ğ¡Ğ¾Ğ±Ñ€Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´
â”‚
â”œâ”€â”€ parsing/            # ĞœĞ¾Ğ´ÑƒĞ»ÑŒ Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³Ğ°
â”‚   â”œâ”€â”€ main.py         # Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ¿Ğ°Ñ€ÑĞµÑ€Ğ°
â”‚   â”œâ”€â”€ database.py     # ĞœĞ¾Ğ´ĞµĞ»Ğ¸ Ğ‘Ğ” (SQLAlchemy)
â”‚   â”œâ”€â”€ config.py       # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ°Ñ€ÑĞµÑ€Ğ°
â”‚   â”œâ”€â”€ logger.py       # Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
â”‚   â”œâ”€â”€ downloaders/    # Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ñ‡Ğ¸ĞºĞ¸ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²
â”‚   â”‚   â””â”€â”€ google_drive.py
â”‚   â””â”€â”€ parsers/        # ĞŸĞ°Ñ€ÑĞµÑ€Ñ‹
â”‚       â””â”€â”€ excel_parser.py
â”‚
â”œâ”€â”€ telegram/           # Telegram Ğ±Ğ¾Ñ‚
â”‚   â”œâ”€â”€ bot.py          # Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ±Ğ¾Ñ‚Ğ°
â”‚   â”œâ”€â”€ config.py       # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ±Ğ¾Ñ‚Ğ°
â”‚   â”œâ”€â”€ keyboards.py    # ĞšĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñ‹ Ğ±Ğ¾Ñ‚Ğ°
â”‚   â”œâ”€â”€ states.py       # FSM ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ
â”‚   â””â”€â”€ handlers/       # ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´
â”‚       â”œâ”€â”€ common.py   # ĞĞ±Ñ‰Ğ¸Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ (/start)
â”‚       â”œâ”€â”€ registration.py # Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ
â”‚       â””â”€â”€ settings.py # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
â”‚
â”œâ”€â”€ start.py            # Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ Ñ„Ğ°Ğ¹Ğ» Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°
â”œâ”€â”€ Dockerfile          # Docker Ğ¾Ğ±Ñ€Ğ°Ğ·
â”œâ”€â”€ docker-compose.yml  # Docker Compose ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
â”œâ”€â”€ Caddyfile          # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Caddy
â”œâ”€â”€ supervisord.conf   # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Supervisor
â””â”€â”€ requirements.txt   # Python Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
```

---

## ğŸ—„ï¸ Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### Ğ¡Ñ…ĞµĞ¼Ğ° Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     groups       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚
â”‚ name (UNIQUE)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                  â”‚                  â”‚
         â–¼                  â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   students   â”‚  â”‚   subjects   â”‚  â”‚    topics     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚  â”‚ id (PK)      â”‚  â”‚ id (PK)      â”‚
â”‚ fio          â”‚  â”‚ name         â”‚  â”‚ subject_id   â”‚
â”‚ group_id (FK)â”‚  â”‚ group_id (FK)â”‚  â”‚ name         â”‚
â”‚              â”‚  â”‚              â”‚  â”‚ hours       â”‚
â”‚ UNIQUE:      â”‚  â”‚              â”‚  â”‚ date         â”‚
â”‚ (fio,        â”‚  â”‚              â”‚  â”‚              â”‚
â”‚  group_id)   â”‚  â”‚              â”‚  â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                 â”‚
       â”‚                 â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    grades    â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚ id (PK)      â”‚
         â”‚ student_id   â”‚
         â”‚ subject_id   â”‚
         â”‚ date         â”‚
         â”‚ value        â”‚
         â”‚              â”‚
         â”‚ UNIQUE:      â”‚
         â”‚ (student_id, â”‚
         â”‚  subject_id, â”‚
         â”‚  date)       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ telegram_users  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚
â”‚ telegram_id     â”‚
â”‚ username        â”‚
â”‚ first_name      â”‚
â”‚ last_name       â”‚
â”‚ full_name       â”‚
â”‚ registered_at   â”‚
â”‚ is_registered   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   parse_log     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚
â”‚ parse_time      â”‚
â”‚ files_processed â”‚
â”‚ groups_updated  â”‚
â”‚ status          â”‚
â”‚ error_message   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   app_logs      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚
â”‚ timestamp       â”‚
â”‚ module          â”‚
â”‚ level           â”‚
â”‚ message         â”‚
â”‚ description     â”‚
â”‚ details (JSON)  â”‚
â”‚ user_id         â”‚
â”‚ error_traceback â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞœĞ¾Ğ´ĞµĞ»Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

#### 1. **Group** (Ğ“Ñ€ÑƒĞ¿Ğ¿Ñ‹)
```python
class Group(Base):
    id: int (PK)
    name: str (UNIQUE)  # ĞĞ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: "23-09.1", "24-11"
```

#### 2. **Student** (Ğ¡Ñ‚ÑƒĞ´ĞµĞ½Ñ‚Ñ‹)
```python
class Student(Base):
    id: int (PK)
    fio: str  # Ğ¤Ğ˜Ğ Ğ² Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ "Ğ¤Ğ°Ğ¼Ğ¸Ğ»Ğ¸Ñ Ğ˜.Ğ."
    group_id: int (FK â†’ groups.id)
    # UNIQUE constraint: (fio, group_id)
```

#### 3. **Subject** (ĞŸÑ€ĞµĞ´Ğ¼ĞµÑ‚Ñ‹)
```python
class Subject(Base):
    id: int (PK)
    name: str  # ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ğ°
    group_id: int (FK â†’ groups.id)
```

#### 4. **Topic** (Ğ¢ĞµĞ¼Ñ‹ Ğ·Ğ°Ğ½ÑÑ‚Ğ¸Ğ¹)
```python
class Topic(Base):
    id: int (PK)
    subject_id: int (FK â†’ subjects.id)
    name: str  # ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ‚ĞµĞ¼Ñ‹
    hours: int  # ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ñ‡Ğ°ÑĞ¾Ğ² (Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ğ¾ 2)
    date: date  # Ğ”Ğ°Ñ‚Ğ° Ğ¿Ñ€Ğ¾Ğ²ĞµĞ´ĞµĞ½Ğ¸Ñ (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
```

#### 5. **Grade** (ĞÑ†ĞµĞ½ĞºĞ¸/ĞŸÑ€Ğ¾Ğ¿ÑƒÑĞºĞ¸)
```python
class Grade(Base):
    id: int (PK)
    student_id: int (FK â†’ students.id)
    subject_id: int (FK â†’ subjects.id)
    date: date  # Ğ”Ğ°Ñ‚Ğ° Ğ·Ğ°Ğ½ÑÑ‚Ğ¸Ñ
    value: str  # ĞÑ†ĞµĞ½ĞºĞ° ("5", "4", "3", "2") Ğ¸Ğ»Ğ¸ "Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑĞº"
    # UNIQUE constraint: (student_id, subject_id, date)
```

#### 6. **TelegramUser** (ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸ Ğ±Ğ¾Ñ‚Ğ°)
```python
class TelegramUser(Base):
    id: int (PK)
    telegram_id: int (UNIQUE)  # ID Ğ² Telegram
    username: str  # @username
    first_name: str
    last_name: str
    full_name: str  # Ğ¤Ğ˜Ğ Ğ¿Ñ€Ğ¸ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸
    registered_at: datetime
    is_registered: int  # 0 Ğ¸Ğ»Ğ¸ 1
```

#### 7. **ParseLog** (Ğ›Ğ¾Ğ³Ğ¸ Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³Ğ°)
```python
class ParseLog(Base):
    id: int (PK)
    parse_time: datetime
    files_processed: int
    groups_updated: str  # JSON ÑÑ‚Ñ€Ğ¾ĞºĞ° ÑĞ¾ ÑĞ¿Ğ¸ÑĞºĞ¾Ğ¼ Ğ³Ñ€ÑƒĞ¿Ğ¿
    status: str  # "success" Ğ¸Ğ»Ğ¸ "error"
    error_message: str
```

#### 8. **AppLog** (Ğ£Ğ½Ğ¸Ğ²ĞµÑ€ÑĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ»Ğ¾Ğ³Ğ¸)
```python
class AppLog(Base):
    id: int (PK)
    timestamp: datetime
    module: str  # "parser", "backend", "telegram"
    level: str  # "INFO", "WARNING", "ERROR", "DEBUG"
    message: str
    description: str
    details: str  # JSON ÑÑ‚Ñ€Ğ¾ĞºĞ°
    user_id: int  # Ğ”Ğ»Ñ Telegram Ğ»Ğ¾Ğ³Ğ¾Ğ²
    error_traceback: str
```

---

## ğŸ”Œ API Endpoints

### ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ

Ğ’ÑĞµ ÑĞ½Ğ´Ğ¿Ğ¾Ğ¸Ğ½Ñ‚Ñ‹ (ĞºÑ€Ğ¾Ğ¼Ğµ `/` Ğ¸ `/api/token`) Ñ‚Ñ€ĞµĞ±ÑƒÑÑ‚ Ñ‚Ğ¾ĞºĞµĞ½ Ğ² Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞµ:
```
Authorization: Bearer <token>
```

Ğ¢Ğ¾ĞºĞµĞ½ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ‡ĞµÑ€ĞµĞ·:
- `GET /api/token` (Ğ¿ÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹, Ğ±ĞµĞ· Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸)
- Ğ’Ñ‹Ğ²Ğ¾Ğ´Ğ¸Ñ‚ÑÑ Ğ² ĞºĞ¾Ğ½ÑĞ¾Ğ»ÑŒ Ğ¿Ñ€Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑĞºĞµ ÑĞµÑ€Ğ²ĞµÑ€Ğ°

### ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ÑĞ½Ğ´Ğ¿Ğ¾Ğ¸Ğ½Ñ‚Ñ‹

#### 1. **GET /** (ĞšĞ¾Ñ€Ğ½ĞµĞ²Ğ¾Ğ¹)
- **ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾Ğ± API
- **ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ**: ĞĞµ Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ
- **ĞÑ‚Ğ²ĞµÑ‚**:
```json
{
  "message": "GreMuiv API",
  "version": "1.0.0",
  "docs": "/docs",
  "endpoints": {...}
}
```

#### 2. **GET /api/token**
- **ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ‚Ğ¾ĞºĞµĞ½ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°
- **ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ**: ĞĞµ Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ
- **ĞÑ‚Ğ²ĞµÑ‚**:
```json
{
  "token": "abc123...",
  "token_file": "/app/data/api_tokens.json",
  "created_at": "2024-01-01T00:00:00",
  "usage": "Authorization: Bearer <token>"
}
```

#### 3. **GET /api/groups**
- **ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ²ÑĞµÑ… Ğ³Ñ€ÑƒĞ¿Ğ¿
- **ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ**: Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ
- **ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹**: ĞĞµÑ‚
- **ĞÑ‚Ğ²ĞµÑ‚**:
```json
[
  {"id": 1, "name": "23-09.1"},
  {"id": 2, "name": "24-11"},
  {"id": 3, "name": "23-09.2"}
]
```

#### 4. **GET /api/subjects**
- **ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ğ¾Ğ²
- **ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ**: Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ
- **ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹**:
  - `group_id` (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾): ID Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹ Ğ´Ğ»Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸
- **ĞŸÑ€Ğ¸Ğ¼ĞµÑ€**: `/api/subjects?group_id=1`
- **ĞÑ‚Ğ²ĞµÑ‚**:
```json
[
  {
    "id": 1,
    "name": "ĞœĞ°Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸ĞºĞ°",
    "group_id": 1
  }
]
```

#### 5. **GET /api/students**
- **ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚Ğ¾Ğ²
- **ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ**: Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ
- **ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹**:
  - `group_id` (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾): ID Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹ Ğ´Ğ»Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸
- **ĞŸÑ€Ğ¸Ğ¼ĞµÑ€**: `/api/students?group_id=1`
- **ĞÑ‚Ğ²ĞµÑ‚**:
```json
[
  {
    "id": 1,
    "fio": "Ğ˜Ğ²Ğ°Ğ½Ğ¾Ğ² Ğ˜.Ğ˜.",
    "group_id": 1
  }
]
```

#### 6. **GET /api/grades**
- **ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¾Ñ†ĞµĞ½ĞºĞ¸ Ğ¿Ğ¾ Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ñƒ Ğ¸ Ğ³Ñ€ÑƒĞ¿Ğ¿Ğµ
- **ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ**: Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ
- **ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹**:
  - `subject_id` (Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾): ID Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ğ°
  - `group_id` (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾): ID Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹ (ĞµÑĞ»Ğ¸ Ğ½Ğµ ÑƒĞºĞ°Ğ·Ğ°Ğ½, Ğ±ĞµÑ€ĞµÑ‚ÑÑ Ğ¸Ğ· Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ğ°)
- **ĞŸÑ€Ğ¸Ğ¼ĞµÑ€**: `/api/grades?subject_id=1&group_id=1`
- **ĞÑ‚Ğ²ĞµÑ‚**:
```json
{
  "dates": ["2024-01-01", "2024-01-02"],
  "students": [
    {
      "id": 1,
      "fio": "Ğ˜Ğ²Ğ°Ğ½Ğ¾Ğ² Ğ˜.Ğ˜.",
      "grades": {
        "2024-01-01": "5",
        "2024-01-02": "Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑĞº"
      }
    }
  ]
}
```

#### 7. **GET /api/stats**
- **ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¿Ğ¾ÑĞµÑ‰Ğ°ĞµĞ¼Ğ¾ÑÑ‚Ğ¸ Ğ¿Ğ¾ Ğ³Ñ€ÑƒĞ¿Ğ¿Ğµ Ğ¸ Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ñƒ
- **ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ**: Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ
- **ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹**:
  - `group_id` (Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾): ID Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹
  - `subject_id` (Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾): ID Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ğ°
- **ĞŸÑ€Ğ¸Ğ¼ĞµÑ€**: `/api/stats?group_id=1&subject_id=1`
- **ĞÑ‚Ğ²ĞµÑ‚**:
```json
[
  {
    "id": 1,
    "fio": "Ğ˜Ğ²Ğ°Ğ½Ğ¾Ğ² Ğ˜.Ğ˜.",
    "total": 10,
    "absences": 2,
    "grades": 8,
    "attendance": 80.0
  }
]
```

#### 8. **GET /api/stats/rating/absences**
- **ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: Ğ ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³ Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹ Ğ¿Ğ¾ Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑĞºĞ°Ğ¼ (Ğ¾Ñ‚ Ğ¼ĞµĞ½ÑŒÑˆĞµĞ³Ğ¾ Ğº Ğ±Ğ¾Ğ»ÑŒÑˆĞµĞ¼Ñƒ)
- **ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ**: Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ
- **ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹**:
  - `group_id` (Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾): ID Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹
- **ĞŸÑ€Ğ¸Ğ¼ĞµÑ€**: `/api/stats/rating/absences?group_id=1`
- **ĞÑ‚Ğ²ĞµÑ‚**:
```json
[
  {
    "id": 1,
    "fio": "Ğ˜Ğ²Ğ°Ğ½Ğ¾Ğ² Ğ˜.Ğ˜.",
    "absences": 0,
    "position": 1
  },
  {
    "id": 2,
    "fio": "ĞŸĞµÑ‚Ñ€Ğ¾Ğ² ĞŸ.ĞŸ.",
    "absences": 2,
    "position": 2
  }
]
```

#### 9. **GET /api/stats/rating/grades**
- **ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: Ğ ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³ Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹ Ğ¿Ğ¾ ÑÑ€ĞµĞ´Ğ½ĞµĞ¼Ñƒ Ğ±Ğ°Ğ»Ğ»Ñƒ (Ğ¾Ñ‚ Ğ±Ğ¾Ğ»ÑŒÑˆĞµĞ³Ğ¾ Ğº Ğ¼ĞµĞ½ÑŒÑˆĞµĞ¼Ñƒ)
- **ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ**: Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ
- **ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹**:
  - `group_id` (Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾): ID Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹
- **ĞŸÑ€Ğ¸Ğ¼ĞµÑ€**: `/api/stats/rating/grades?group_id=1`
- **ĞÑ‚Ğ²ĞµÑ‚**:
```json
[
  {
    "id": 1,
    "fio": "Ğ˜Ğ²Ğ°Ğ½Ğ¾Ğ² Ğ˜.Ğ˜.",
    "average_grade": 4.8,
    "total_grades": 10,
    "position": 1
  }
]
```

#### 10. **GET /api/student**
- **ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: ĞŸĞ¾Ğ¸ÑĞº ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚Ğ° Ğ¿Ğ¾ Ğ¤Ğ˜Ğ
- **ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ**: Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ
- **ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹**:
  - `fio` (Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾): Ğ¤Ğ˜Ğ ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚Ğ°
- **ĞŸÑ€Ğ¸Ğ¼ĞµÑ€**: `/api/student?fio=Ğ˜Ğ²Ğ°Ğ½Ğ¾Ğ² Ğ˜.Ğ˜.`
- **ĞÑ‚Ğ²ĞµÑ‚**:
```json
{
  "id": 1,
  "fio": "Ğ˜Ğ²Ğ°Ğ½Ğ¾Ğ² Ğ˜.Ğ˜.",
  "group_id": 1,
  "group_name": "23-09.1"
}
```

---

## ğŸ§© ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

### 1. **Parser (ĞŸĞ°Ñ€ÑĞµÑ€)**

**Ğ Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ**: `parsing/main.py`

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ**:
- Ğ¡ĞºĞ°Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚ Excel Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ñ Google Drive
- ĞŸĞ°Ñ€ÑĞ¸Ñ‚ Excel Ñ„Ğ°Ğ¹Ğ»Ñ‹ (openpyxl)
- Ğ˜Ğ·Ğ²Ğ»ĞµĞºĞ°ĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ: Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹, ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚Ñ‹, Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ñ‹, Ğ¾Ñ†ĞµĞ½ĞºĞ¸, Ğ´Ğ°Ñ‚Ñ‹
- Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ² Ğ‘Ğ”
- Ğ£Ğ´Ğ°Ğ»ÑĞµÑ‚ ÑÑ‚Ğ°Ñ€Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµĞ¼Ñ‹Ñ… Ğ³Ñ€ÑƒĞ¿Ğ¿
- Ğ›Ğ¾Ğ³Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³Ğ°

**Ğ Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ**: Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ÑÑ Ñ€Ğ°Ğ· Ğ² Ñ‡Ğ°Ñ Ğ² 00 Ğ¼Ğ¸Ğ½ÑƒÑ‚ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ñ‡Ğ°ÑĞ°

**ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸**:
- `parse_and_save()` - Ğ³Ğ»Ğ°Ğ²Ğ½Ğ°Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³Ğ°
- `save_to_database()` - ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ² Ğ‘Ğ”
- `main()` - Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ°, Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ñ‰Ğ¸ĞºĞ°

**Ğ—Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ğº Ğ‘Ğ”**:
```python
# ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ³Ñ€ÑƒĞ¿Ğ¿ Ğ´Ğ»Ñ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ
groups = db.query(Group).filter(Group.name.in_(group_names)).all()

# Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ ÑÑ‚Ğ°Ñ€Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
db.query(Grade).filter(Grade.student_id.in_(student_ids)).delete()
db.query(Student).filter(Student.group_id == group_id).delete()
db.query(Subject).filter(Subject.group_id == group_id).delete()

# Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
db.add(Group(name=group_name))
db.add(Student(fio=fio, group_id=group_id))
db.add(Subject(name=subject_name, group_id=group_id))
db.add(Grade(student_id=student_id, subject_id=subject_id, date=date, value=value))
```

### 2. **Backend API (FastAPI)**

**Ğ Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ**: `backend/app.py`, `backend/routes/`

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ**:
- REST API Ğ´Ğ»Ñ Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´Ğ°
- ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· Ñ‚Ğ¾ĞºĞµĞ½Ñ‹
- CRUD Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸
- Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¸ Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³Ğ¸

**ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ñ€Ğ¾ÑƒÑ‚Ñ‹**:
- `groups.py` - Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ°Ğ¼Ğ¸
- `subjects.py` - Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ğ°Ğ¼Ğ¸
- `students.py` - Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ° ÑĞ¾ ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚Ğ°Ğ¼Ğ¸
- `grades.py` - Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Ğ¾Ñ†ĞµĞ½ĞºĞ°Ğ¼Ğ¸
- `stats.py` - ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¸ Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³Ğ¸
- `student.py` - Ğ¿Ğ¾Ğ¸ÑĞº ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚Ğ°

**Ğ—Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ğº Ğ‘Ğ”**:
```python
# ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ³Ñ€ÑƒĞ¿Ğ¿
groups = db.query(Group).order_by(Group.name).all()

# ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚Ğ¾Ğ² Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹
students = db.query(Student).filter(Student.group_id == group_id).all()

# ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¾Ñ†ĞµĞ½Ğ¾Ğº
grades = db.query(Grade).join(Student).filter(
    Grade.subject_id == subject_id,
    Student.group_id == group_id
).order_by(Grade.date).all()

# ĞŸĞ¾Ğ´ÑÑ‡ĞµÑ‚ Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑĞºĞ¾Ğ²
absences = sum(1 for g in grades if 'Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑĞº' in str(g.value).lower())

# Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ ÑÑ€ĞµĞ´Ğ½ĞµĞ³Ğ¾ Ğ±Ğ°Ğ»Ğ»Ğ°
numeric_grades = [float(g.value) for g in grades if g.value.isdigit()]
average = sum(numeric_grades) / len(numeric_grades) if numeric_grades else 0
```

### 3. **Telegram Bot**

**Ğ Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ**: `telegram/`

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ**:
- Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹
- ĞŸĞ¾Ğ¸ÑĞº ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚Ğ° Ğ¿Ğ¾ Ğ¤Ğ˜Ğ
- ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ¾Ñ†ĞµĞ½Ğ¾Ğº ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚Ğ°
- ĞšĞ½Ğ¾Ğ¿ĞºĞ° "Ğ–ÑƒÑ€Ğ½Ğ°Ğ»" (Mini App) - Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ²ĞµĞ±-Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ

**ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹**:
- `/start` - Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ¾ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹, Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ
- `/settings` - Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ (Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ğ¤Ğ˜Ğ)

**Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ (FSM)**:
- `RegistrationStates.waiting_for_fio` - Ğ¾Ğ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ²Ğ²Ğ¾Ğ´Ğ° Ğ¤Ğ˜Ğ

**Ğ—Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ğº Ğ‘Ğ”**:
```python
# ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
user = db.query(TelegramUser).filter(
    TelegramUser.telegram_id == telegram_id
).first()

# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
user = TelegramUser(
    telegram_id=telegram_id,
    username=username,
    first_name=first_name,
    is_registered=0
)

# ĞŸĞ¾Ğ¸ÑĞº ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚Ğ° Ğ¿Ğ¾ Ğ¤Ğ˜Ğ
student = db.query(Student).filter(
    Student.fio.ilike(f"%{fio}%")
).first()
```

### 4. **Frontend (React)**

**Ğ Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ**: `frontend/src/`

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ**:
- ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ¶ÑƒÑ€Ğ½Ğ°Ğ»Ğ° Ğ¾Ñ†ĞµĞ½Ğ¾Ğº
- Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ°Ğ¼ Ğ¸ Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ğ°Ğ¼
- Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¿Ğ¾ÑĞµÑ‰Ğ°ĞµĞ¼Ğ¾ÑÑ‚Ğ¸
- Ğ ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³Ğ¸ ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚Ğ¾Ğ²
- ĞšĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€ÑŒ Ğ·Ğ°Ğ½ÑÑ‚Ğ¸Ğ¹

**ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹**:
- `App.jsx` - Ğ³Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚
- `GroupSelector.jsx` - Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹
- `SubjectSelector.jsx` - Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ğ°
- `GradesTable.jsx` - Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ğ¾Ñ†ĞµĞ½Ğ¾Ğº
- `StatsTable.jsx` - ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°
- `RatingTable.jsx` - Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³Ğ¸

**API ĞºĞ»Ğ¸ĞµĞ½Ñ‚**: `services/api.js` (Axios)

### 5. **Caddy (Web Server)**

**Ğ Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ**: `Caddyfile`

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ**:
- Reverse proxy Ğ´Ğ»Ñ API (`/api/*` â†’ `localhost:5000`)
- Ğ¡Ñ‚Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´Ğ° (`/` â†’ `/app/frontend/dist`)
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ HTTPS (Let's Encrypt)
- SPA routing (fallback Ğ½Ğ° `index.html`)

**ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ**:
```caddyfile
vildanai.ru, www.vildanai.ru {
    handle /api/* {
        reverse_proxy localhost:5000
    }
    root * /app/frontend/dist
    file_server
    handle {
        try_files {path} /index.html
    }
}
```

### 6. **Supervisor**

**Ğ Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ**: `supervisord.conf`

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ**:
- Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ°Ğ¼Ğ¸ Ğ² Docker ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğµ
- Ğ—Ğ°Ğ¿ÑƒÑĞº FastAPI ÑĞµÑ€Ğ²ĞµÑ€Ğ°
- Ğ—Ğ°Ğ¿ÑƒÑĞº Caddy
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑĞº Ğ¿Ñ€Ğ¸ ÑĞ±Ğ¾ÑÑ…
- Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² stdout/stderr

---

## ğŸ”„ ĞŸĞ¾Ñ‚Ğ¾ĞºĞ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### 1. ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

```
Google Drive
    â†“
[Parser] download_target_files()
    â†“
Excel Ñ„Ğ°Ğ¹Ğ»Ñ‹ (downloaded_files/)
    â†“
[Parser] parse_excel_file()
    â†“
Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (dict)
    â†“
[Parser] save_to_database()
    â†“
SQLite Database
```

### 2. Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ‡ĞµÑ€ĞµĞ· API

```
Frontend (React)
    â†“
HTTP Request â†’ /api/grades?subject_id=1&group_id=1
    â†“
Caddy (Reverse Proxy)
    â†“
FastAPI Backend
    â†“
[Auth] verify_token()
    â†“
[Route] get_grades()
    â†“
SQLAlchemy Query
    â†“
SQLite Database
    â†“
JSON Response
    â†“
Frontend (Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ)
```

### 3. Telegram Bot

```
Telegram User
    â†“
/start command
    â†“
[Handler] cmd_start()
    â†“
[DB] ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸
    â†“
Ğ•ÑĞ»Ğ¸ Ğ½Ğµ Ğ·Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½:
    â†“
[FSM] RegistrationStates.waiting_for_fio
    â†“
ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ²Ğ¾Ğ´Ğ¸Ñ‚ Ğ¤Ğ˜Ğ
    â†“
[DB] ĞŸĞ¾Ğ¸ÑĞº ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚Ğ° Ğ¿Ğ¾ Ğ¤Ğ˜Ğ
    â†“
[DB] Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
    â†“
ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñ‹ Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ¾Ğ¹ "Ğ–ÑƒÑ€Ğ½Ğ°Ğ»"
    â†“
ĞŸÑ€Ğ¸ Ğ½Ğ°Ğ¶Ğ°Ñ‚Ğ¸Ğ¸ "Ğ–ÑƒÑ€Ğ½Ğ°Ğ»":
    â†“
ĞÑ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ Mini App (https://vildanai.ru)
```

### 4. Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

```
Ğ’ÑĞµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹
    â†“
[Logger] log_*_info/error()
    â†“
[DB] AppLog table
    â†“
Ğ¢Ğ°ĞºĞ¶Ğµ Ğ²Ñ‹Ğ²Ğ¾Ğ´ Ğ² stdout (Ğ´Ğ»Ñ Docker Ğ»Ğ¾Ğ³Ğ¾Ğ²)
```

---

## ğŸ“Š Ğ¢Ğ¸Ğ¿Ğ¸Ñ‡Ğ½Ñ‹Ğµ SQL Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹

### ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ²ÑĞµÑ… Ğ³Ñ€ÑƒĞ¿Ğ¿
```sql
SELECT id, name FROM groups ORDER BY name;
```

### ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚Ğ¾Ğ² Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹
```sql
SELECT id, fio, group_id 
FROM students 
WHERE group_id = ? 
ORDER BY fio;
```

### ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¾Ñ†ĞµĞ½Ğ¾Ğº ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚Ğ° Ğ¿Ğ¾ Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ñƒ
```sql
SELECT g.date, g.value
FROM grades g
JOIN students s ON g.student_id = s.id
WHERE s.id = ? AND g.subject_id = ?
ORDER BY g.date;
```

### ĞŸĞ¾Ğ´ÑÑ‡ĞµÑ‚ Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑĞºĞ¾Ğ²
```sql
SELECT COUNT(*) 
FROM grades 
WHERE student_id = ? 
  AND subject_id = ?
  AND (value LIKE '%Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑĞº%' OR value IN ('Ğ½', 'Ğ½/Ñ', 'Ğ½ĞµÑĞ²ĞºĞ°'));
```

### Ğ¡Ñ€ĞµĞ´Ğ½Ğ¸Ğ¹ Ğ±Ğ°Ğ»Ğ» ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚Ğ°
```sql
SELECT AVG(CAST(value AS REAL))
FROM grades
WHERE student_id = ?
  AND subject_id = ?
  AND value NOT LIKE '%Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑĞº%'
  AND value NOT IN ('Ğ½', 'Ğ½/Ñ', 'Ğ½ĞµÑĞ²ĞºĞ°')
  AND CAST(value AS REAL) BETWEEN 2 AND 5;
```

### Ğ ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³ Ğ¿Ğ¾ Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑĞºĞ°Ğ¼
```sql
SELECT 
    s.id,
    s.fio,
    COUNT(CASE WHEN g.value LIKE '%Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑĞº%' OR g.value IN ('Ğ½', 'Ğ½/Ñ', 'Ğ½ĞµÑĞ²ĞºĞ°') THEN 1 END) as absences
FROM students s
LEFT JOIN grades g ON s.id = g.student_id
WHERE s.group_id = ?
GROUP BY s.id, s.fio
ORDER BY absences ASC, s.fio ASC;
```

---

## ğŸ” Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

1. **ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ API**: Ğ¢Ğ¾ĞºĞµĞ½Ñ‹ Ğ² Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞµ `Authorization: Bearer <token>`
2. **HTTPS**: ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ SSL ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ñ‹ Ñ‡ĞµÑ€ĞµĞ· Caddy (Let's Encrypt)
3. **SQL Injection**: Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ñ‡ĞµÑ€ĞµĞ· SQLAlchemy ORM (Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹)
4. **CORS**: ĞĞ°ÑÑ‚Ñ€Ğ¾ĞµĞ½ Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ğ´Ğ¾Ğ¼ĞµĞ½Ğ¾Ğ¼ `vildanai.ru`

---

## ğŸ“ ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ñ

- **Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…**: SQLite (Ñ„Ğ°Ğ¹Ğ» `data/students.db`)
- **ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³**: Ğ Ğ°Ğ· Ğ² Ñ‡Ğ°Ñ Ğ² 00 Ğ¼Ğ¸Ğ½ÑƒÑ‚ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ñ‡Ğ°ÑĞ°
- **Ğ›Ğ¾Ğ³Ğ¸**: Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑÑÑ‚ÑÑ Ğ² Ğ‘Ğ” (`app_logs`) Ğ¸ Ğ²Ñ‹Ğ²Ğ¾Ğ´ÑÑ‚ÑÑ Ğ² stdout
- **Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹**: ĞĞ´Ğ¸Ğ½ Docker ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€ Ğ½Ğ° VDS Ñ Ğ´Ğ¾Ğ¼ĞµĞ½Ğ¾Ğ¼ `vildanai.ru`
- **Telegram Bot**: Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞµÑĞ»Ğ¸ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½ `BOT_TOKEN`

---

## ğŸ”— ĞŸĞ¾Ğ»ĞµĞ·Ğ½Ñ‹Ğµ ÑÑÑ‹Ğ»ĞºĞ¸

- **API Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ**: `http://vildanai.ru/api/docs` (Swagger UI)
- **Frontend**: `https://vildanai.ru`
- **Ğ›Ğ¾Ğ³Ğ¸**: `docker-compose logs -f`

