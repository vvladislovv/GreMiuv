# GreMuiv

## üöÄ –ó–∞–ø—É—Å–∫ –≤ Docker

### 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

```bash
docker-compose down
docker stop gremuiv-tunnel 2>/dev/null
docker rm gremuiv-tunnel 2>/dev/null
```

### 2. –°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ

```bash
docker-compose up -d --build
```

**–í—Å—ë!** Dockerfile –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –°–æ–±–µ—Ä–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç Caddy (–ø–æ—Ä—Ç—ã 80, 443)
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç Backend API (–ø–æ—Ä—Ç 5000)
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç –ø–∞—Ä—Å–µ—Ä –∏ Telegram –±–æ—Ç

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
./check.sh
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
docker exec gremuiv-app ps aux | grep -E "(caddy|python)"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ API
curl http://localhost/api/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
curl http://localhost/
```

### 4. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

- **–§—Ä–æ–Ω—Ç–µ–Ω–¥**: http://localhost
- **API**: http://localhost/api
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: http://localhost/api/docs

## üìã –õ–æ–≥–∏

–í—Å–µ –ª–æ–≥–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ `stdout/stderr` –∏ –≤–∏–¥–Ω—ã —á–µ—Ä–µ–∑ `docker-compose logs`:

```bash
# –í—Å–µ –ª–æ–≥–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
docker-compose logs -f

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
docker-compose logs --tail=100

# –õ–æ–≥–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–∞–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
#   [STARTUP] - –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
#   [API] - FastAPI —Å–µ—Ä–≤–µ—Ä
#   [PARSER] - –ø–∞—Ä—Å–µ—Ä –¥–∞–Ω–Ω—ã—Ö
#   [BOT] - Telegram –±–æ—Ç
#   [CADDY] - –≤–µ–±-—Å–µ—Ä–≤–µ—Ä (–ª–æ–≥–∏ Caddy)

# –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É (–ø—Ä–∏–º–µ—Ä—ã):
docker-compose logs -f | grep "\[PARSER\]"
docker-compose logs -f | grep "\[BOT\]"
docker-compose logs -f | grep "\[API\]"
```

## üîß –ß—Ç–æ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

- **Caddy** - –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç–∞—Ö 80/443 (–æ—Ç–¥–∞–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç API)
- **Backend API** - FastAPI –Ω–∞ –ø–æ—Ä—Ç—É 5000
- **–ü–∞—Ä—Å–µ—Ä** - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–∑ –≤ —á–∞—Å
- **Telegram –±–æ—Ç** - –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω BOT_TOKEN

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `docker-compose.yml`:

```yaml
environment:
  - BOT_TOKEN=your_token  # –î–ª—è Telegram –±–æ—Ç–∞
```

## üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
docker-compose down
```
