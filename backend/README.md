# Backend API - GreMuiv

FastAPI –±—ç–∫–µ–Ω–¥ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –∂—É—Ä–Ω–∞–ª–∞ –æ—Ü–µ–Ω–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
backend/
‚îú‚îÄ‚îÄ app.py              # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ config.py           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (CORS, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞)
‚îú‚îÄ‚îÄ routes/             # API —Ä–æ—É—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ groups.py       # –†–æ—É—Ç—ã –¥–ª—è –≥—Ä—É–ø–ø
‚îÇ   ‚îú‚îÄ‚îÄ subjects.py     # –†–æ—É—Ç—ã –¥–ª—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ students.py     # –†–æ—É—Ç—ã –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ grades.py       # –†–æ—É—Ç—ã –¥–ª—è –æ—Ü–µ–Ω–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ stats.py        # –†–æ—É—Ç—ã –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
‚îú‚îÄ‚îÄ utils/              # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ helpers.py      # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îú‚îÄ‚îÄ run_backend.py      # –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ API —Å–µ—Ä–≤–µ—Ä–∞
‚îî‚îÄ‚îÄ start.py            # –ó–∞–ø—É—Å–∫ –ø–∞—Ä—Å–µ—Ä–∞ + API –≤–º–µ—Å—Ç–µ
```

## üöÄ –ó–∞–ø—É—Å–∫

### –¢–æ–ª—å–∫–æ API —Å–µ—Ä–≤–µ—Ä:
```bash
cd backend
python3 run_backend.py
```

### –ü–∞—Ä—Å–µ—Ä + API –≤–º–µ—Å—Ç–µ:
```bash
cd backend
python3 start.py
```

## üì° API Endpoints

### 1. –ö–æ—Ä–Ω–µ–≤–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç
- **GET** `/`
- –û–ø–∏—Å–∞–Ω–∏–µ: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± API
- –û—Ç–≤–µ—Ç:
```json
{
  "message": "GreMuiv API",
  "version": "1.0.0",
  "docs": "/docs",
  "endpoints": {...}
}
```

### 2. –ì—Ä—É–ø–ø—ã
- **GET** `/api/groups`
- –û–ø–∏—Å–∞–Ω–∏–µ: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≥—Ä—É–ø–ø
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: –Ω–µ—Ç
- –û—Ç–≤–µ—Ç:
```json
[
  {"id": 1, "name": "23-09.1"},
  {"id": 2, "name": "24-11"},
  {"id": 3, "name": "23-09.2"}
]
```

### 3. –ü—Ä–µ–¥–º–µ—Ç—ã
- **GET** `/api/subjects`
- –û–ø–∏—Å–∞–Ω–∏–µ: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
  - `group_id` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): ID –≥—Ä—É–ø–ø—ã –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- –ü—Ä–∏–º–µ—Ä: `/api/subjects?group_id=1`
- –û—Ç–≤–µ—Ç:
```json
[
  {
    "id": 1,
    "name": "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞",
    "group_id": 1
  },
  ...
]
```

### 4. –°—Ç—É–¥–µ–Ω—Ç—ã
- **GET** `/api/students`
- –û–ø–∏—Å–∞–Ω–∏–µ: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
  - `group_id` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): ID –≥—Ä—É–ø–ø—ã –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- –ü—Ä–∏–º–µ—Ä: `/api/students?group_id=1`
- –û—Ç–≤–µ—Ç:
```json
[
  {
    "id": 1,
    "fio": "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á",
    "group_id": 1
  },
  ...
]
```

### 5. –û—Ü–µ–Ω–∫–∏
- **GET** `/api/grades`
- –û–ø–∏—Å–∞–Ω–∏–µ: –ü–æ–ª—É—á–∏—Ç—å –æ—Ü–µ–Ω–∫–∏ –ø–æ –≥—Ä—É–ø–ø–µ –∏ –ø—Ä–µ–¥–º–µ—Ç—É
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
  - `group_id` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): ID –≥—Ä—É–ø–ø—ã
  - `subject_id` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): ID –ø—Ä–µ–¥–º–µ—Ç–∞
- –ü—Ä–∏–º–µ—Ä: `/api/grades?group_id=1&subject_id=1`
- –û—Ç–≤–µ—Ç:
```json
{
  "dates": ["2024-01-01", "2024-01-02", "2024-01-03"],
  "students": [
    {
      "id": 1,
      "fio": "–ò–≤–∞–Ω–æ–≤ –ò.–ò.",
      "grades": {
        "2024-01-01": "5",
        "2024-01-02": "–ø—Ä–æ–ø—É—Å–∫",
        "2024-01-03": "4"
      }
    },
    ...
  ]
}
```

### 6. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **GET** `/api/stats`
- –û–ø–∏—Å–∞–Ω–∏–µ: –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ –ø–æ –≥—Ä—É–ø–ø–µ –∏ –ø—Ä–µ–¥–º–µ—Ç—É
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
  - `group_id` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): ID –≥—Ä—É–ø–ø—ã
  - `subject_id` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): ID –ø—Ä–µ–¥–º–µ—Ç–∞
- –ü—Ä–∏–º–µ—Ä: `/api/stats?group_id=1&subject_id=1`
- –û—Ç–≤–µ—Ç:
```json
[
  {
    "id": 1,
    "fio": "–ò–≤–∞–Ω–æ–≤ –ò.–ò.",
    "total": 10,
    "absences": 2,
    "grades": 8,
    "attendance": 80.0
  },
  ...
]
```

### 7. –†–µ–π—Ç–∏–Ω–≥ –ø–æ –ø—Ä–æ–ø—É—Å–∫–∞–º
- **GET** `/api/stats/rating/absences`
- –û–ø–∏—Å–∞–Ω–∏–µ: –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–π—Ç–∏–Ω–≥ –≥—Ä—É–ø–ø—ã –ø–æ –ø—Ä–æ–ø—É—Å–∫–∞–º (–ø–æ –≤—Å–µ–º –ø—Ä–µ–¥–º–µ—Ç–∞–º)
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
  - `group_id` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): ID –≥—Ä—É–ø–ø—ã
- –ü—Ä–∏–º–µ—Ä: `/api/stats/rating/absences?group_id=1`
- –û—Ç–≤–µ—Ç:
```json
[
  {
    "id": 1,
    "fio": "–ò–≤–∞–Ω–æ–≤ –ò.–ò.",
    "absences": 2,
    "position": 1
  },
  {
    "id": 2,
    "fio": "–ü–µ—Ç—Ä–æ–≤ –ü.–ü.",
    "absences": 5,
    "position": 2
  },
  ...
]
```
- –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –æ—Ç –º–µ–Ω—å—à–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ–ø—É—Å–∫–æ–≤ –∫ –±–æ–ª—å—à–µ–º—É (–ª—É—á—à–∏–µ –≤–≤–µ—Ä—Ö—É)

### 8. –†–µ–π—Ç–∏–Ω–≥ –ø–æ –æ—Ü–µ–Ω–∫–∞–º
- **GET** `/api/stats/rating/grades`
- –û–ø–∏—Å–∞–Ω–∏–µ: –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–π—Ç–∏–Ω–≥ –≥—Ä—É–ø–ø—ã –ø–æ —Å—Ä–µ–¥–Ω–µ–º—É –±–∞–ª–ª—É (–ø–æ –≤—Å–µ–º –ø—Ä–µ–¥–º–µ—Ç–∞–º)
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
  - `group_id` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ): ID –≥—Ä—É–ø–ø—ã
- –ü—Ä–∏–º–µ—Ä: `/api/stats/rating/grades?group_id=1`
- –í–∞–ª–∏–¥–∞—Ü–∏—è:
  - `group_id` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º (gt=0)
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ Pydantic –º–æ–¥–µ–ª–∏
  - `average_grade` –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç 0.0 –¥–æ 5.0
- –û—Ç–≤–µ—Ç:
```json
[
  {
    "id": 1,
    "fio": "–ò–≤–∞–Ω–æ–≤ –ò.–ò.",
    "average_grade": 4.75,
    "total_grades": 20,
    "position": 1
  },
  {
    "id": 2,
    "fio": "–ü–µ—Ç—Ä–æ–≤ –ü.–ü.",
    "average_grade": 4.75,
    "total_grades": 18,
    "position": 1
  },
  {
    "id": 3,
    "fio": "–°–∏–¥–æ—Ä–æ–≤ –°.–°.",
    "average_grade": 4.50,
    "total_grades": 15,
    "position": 3
  },
  ...
]
```
- –ü—Ä–∏–º–µ—á–∞–Ω–∏—è:
  - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –æ—Ç –±–æ–ª—å—à–µ–≥–æ —Å—Ä–µ–¥–Ω–µ–≥–æ –±–∞–ª–ª–∞ –∫ –º–µ–Ω—å—à–µ–º—É (–ª—É—á—à–∏–µ –≤–≤–µ—Ä—Ö—É)
  - –ü–æ–∑–∏—Ü–∏–∏ –∏–¥—É—Ç —Å—Ç—Ä–æ–≥–æ –æ—Ç 1 –¥–æ N
  - –°—Ç—É–¥–µ–Ω—Ç—ã —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º —Å—Ä–µ–¥–Ω–∏–º –±–∞–ª–ª–æ–º –ø–æ–ª—É—á–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—É—é –ø–æ–∑–∏—Ü–∏—é
  - –°–ª–µ–¥—É—é—â–∏–π —Å—Ç—É–¥–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é —Å —É—á–µ—Ç–æ–º –ø—Ä–æ–ø—É—Å–∫–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –¥–≤–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞ –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ 1, —Å–ª–µ–¥—É—é—â–∏–π –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é 3)
  - –£—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–æ–≤—ã–µ –æ—Ü–µ–Ω–∫–∏ –æ—Ç 2 –¥–æ 5, –ø—Ä–æ–ø—É—Å–∫–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:
- Swagger UI: `http://localhost:5000/docs`
- ReDoc: `http://localhost:5000/redoc`

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `config.py`:
- `CORS_ORIGINS` - —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–ª—è CORS
- `SERVER_HOST` - —Ö–æ—Å—Ç —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 0.0.0.0)
- `SERVER_PORT` - –ø–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 5000)


